<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>User | Dashboard</title>
    <link rel="stylesheet" href="./styles/style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Poppins|Quicksand&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    />
  </head>
  <body>
    <main class="users">
      <div class="user-profile">
        <div class="user-id">
          <div class="ball"></div>
          <h2>Jane</h2>
        </div>

        <div class="tasks">
          <ul>
            <li><i class="fas fa-user"></i>Profile</li>
            <li id="tasks"><i class="fas fa-tasks"></i>Tasks</li>
            <li onclick="window.location.href='make-request.html'">
              <i class="fas fa-user-cog"></i>Make Request
            </li>
            <li onclick="window.location.href='dashboard.html'">
              <i class="fas fa-bars"></i>View All Requests
            </li>
          </ul>
        </div>
      </div>
      <div class="requests">
        <table class="requests-table">
          <tr>
            <th>S/N</th>
            <th>User</th>
            <th>Request</th>
            <th>Date</th>
            <th>Status</th>
          </tr>
          <tr>
            <td>1</td>
            <td>Jane</td>
            <td>Fix Table</td>
            <td></td>
            <td>Pending</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Jane</td>
            <td>Lights not switching on</td>
            <td></td>
            <td>Pending</td>
          </tr>
          <tr>
            <td>3</td>
            <td>Jane</td>
            <td>Electric socket not working</td>
            <td></td>
            <td>Resolved</td>
          </tr>
        </table>

        <div id="result"></div>
      </div>
    </main>
    <script>
      const getUsers = async () => {
        try {
          const results = await fetch(
            'https://jsonplaceholder.typicode.com/posts',
            {
              method: 'GET'
            }
          );
          const users = results.json();
          // document.getElementById('result').innerHTML = users;
          console.log(users);
        } catch (e) {
          console.log(`Error:${e}`);
        }
      };
      getUsers();

      function getPosts() {
        fetch('http://localhost:3000/users')
          .then(res => res.json())
          .then(data => {
            let output = '<h2 class="mb-4">Posts</h2>';
            data.forEach(function(post) {
              output += `
            <div class="card card-body mb-3">
              <h3>${post.id}</h3>
              <p>${post.name}</p>
              <p>${post.email}</p>
              <p>${post.phone_number}</p>
            </div>
          `;
            });
            document.getElementById('result').innerHTML = output;
            console.log(data);
          });
      }
      getPosts();
    </script>
    <script src="./main.js"></script>
    <script src="./login.js"></script>
  </body>
</html>
